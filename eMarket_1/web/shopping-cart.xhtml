<?xml version="1.0" encoding="UTF-8"?>
<!--
/eMarket_1/web/shoppingCart.xhtml
-->
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="jakarta.faces.html" xmlns:f="jakarta.faces.core">
<h:head>
    <title>Panier</title>
    <link href="monstyle.css" rel="stylesheet" type="text/css" />
</h:head>
<h:body>
    <f:view>
        <h:form>
            <nav class="navbar">
                <ul class="nav-links">
                    <li>
                        <h:commandLink action="toindex" styleClass="nav-link">
                            <i class="fas fa-home"></i> <!-- Optionnel -->
                            <h:outputText value="Accueil" />
                        </h:commandLink>
                    </li>
                    <li>
                        <h:commandLink action="tocatalog" styleClass="nav-link">
                            <i class="fas fa-book"></i>
                            <h:outputText value="Catalogue" />
                        </h:commandLink>
                    </li>
                    <li>
                        <h:commandLink action="toshoppingcart" styleClass="nav-link">
                            <i class="fas fa-shopping-cart"></i>
                            <h:outputText value="Panier (#{shoppingCartManager.shoppingCart.size()})" />
                        </h:commandLink>
                    </li>
                    <li>
                        <h:commandLink action="toproductcreation" styleClass="nav-link">
                            <i class="fas fa-plus"></i>
                            <h:outputText value="Ajouter un produit" />
                        </h:commandLink>
                    </li>
                </ul>
            </nav>
            <div class="container">
                <h:form styleClass="h-form">
                <h1>Panier</h1>
                    <h:dataTable value="#{shoppingCartManager.shoppingCart}" var="item" styleClass="h-datatable">
                        <h:column>
                            <f:facet name="header">Produit</f:facet>
                            #{item.product.name}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Quantité</f:facet>
                            #{item.quantity}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Prix unitaire</f:facet>
                            #{item.product.price} €
                        </h:column>
                        <h:column>
                            <f:facet name="header">Total</f:facet>
                            #{item.totalPrice} €
                        </h:column>
                        <h:column>
                            <f:facet name="header">Action</f:facet>
                            <h:commandButton value="❌ Supprimer" styleClass="btn btn-error btn-sm"
                                action="#{shoppingCartManager.removeFromCart(item.id)}" />
                        </h:column>

                    </h:dataTable>
                </h:form>
            </div>
        </h:form>
    </f:view>
</h:body>

</html>